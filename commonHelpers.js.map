{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\n\nconst API_KEY = '44405804-89924783490777dc17a96fec8';\nconst API_URL = 'https://pixabay.com/api/?';\n\n\nexport function getImages(queryValue) {\nconst params = new URLSearchParams({\n  key: API_KEY,\n  q: queryValue,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n});\n\n    return fetch(API_URL + params)\n      .then(response => {\n        if (!response.ok) throw new Error(response.status);\n        return response.json();\n      });\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(data, tagToInsert) {\n  tagToInsert.innerHTML = markup(data);\n\n  lightbox.refresh();\n}\n\nfunction markup(data) {\n  return data.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li>\n                <a href=\"${largeImageURL}\"><img src='${webformatURL}' alt='${tags}'></a>\n                <div class=\"content\">\n                    <div class=\"item\"><h3>Likes</h3><p>${likes}</p></div>\n                    <div class=\"item\"><h3>Views</h3><p>${views}</p></div>\n                    <div class=\"item\"><h3>Comments</h3><p>${comments}</p></div>\n                    <div class=\"item\"><h3>Downloads</h3><p>${downloads}</p></div>\n                </div>\n            </li>`\n    )\n    .join('');\n}","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\n\n\nconst refs = {\n  form: document.forms[0],\n  gallery: document.querySelector('.gallery'),\n  div: document.createElement('div'),\n};\n\nrefs.form.addEventListener('submit', e => {\n  e.preventDefault();\n  refs.gallery.innerHTML = '';\n  addLoader();\n\n\n\n  const userQuery = e.target.query.value.trim();\n  if (!userQuery) {\n    //  Прибираємо лоадер, який всередині gallery\n    refs.gallery.innerHTML = '';\n\n    iziToast.warning({\n      title: 'Attention!',\n      message: 'Search field must not be empty',\n      messageSize: '16',\n      position: 'center',\n      close: false,\n      displayMode: 1,\n    });\n    return;\n  }\n  //Імітуємо завантаження сторінки\n  setTimeout(() => {\n    getImages(userQuery)\n      .then(images => {\n        console.log(images);\n        if (!images.hits.length || !images.hits) {\n          throw new Error('Error! Nothing to load');\n        }\n        renderGallery(images, refs.gallery);\n      })\n      .catch(() => {\n        //  Прибираємо лоадер, який всередині gallery\n        refs.gallery.innerHTML = '';\n        iziToast.error({\n          title: 'Error!',\n          message:\n            `Sorry, there are no images matching your search query. Please try again!`,\n          messageSize: '16',\n          backgroundColor: '#ef4040',\n          position: 'center',\n          close: false,\n          displayMode: 1,\n        });\n      });\n    e.target.reset();\n  }, 2000);\n\n\n});\n\nfunction addLoader() {\n  refs.div.classList.add('loader');\n  refs.gallery.append(refs.div);\n}\n"],"names":["API_KEY","API_URL","getImages","queryValue","params","response","lightbox","SimpleLightbox","renderGallery","data","tagToInsert","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","e","addLoader","userQuery","iziToast","images"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAU,4BAGT,SAASC,EAAUC,EAAY,CACtC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKJ,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACd,CAAC,EAEG,OAAO,MAAMF,EAAUG,CAAM,EAC1B,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GAAI,MAAM,IAAI,MAAMA,EAAS,MAAM,EACjD,OAAOA,EAAS,MACxB,CAAO,CACP,CCjBA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAMC,EAAa,CAC/CA,EAAY,UAAYC,EAAOF,CAAI,EAEnCH,EAAS,QAAO,CAClB,CAEA,SAASK,EAAOF,EAAM,CACpB,OAAOA,EAAK,KACT,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,2BACeL,CAAa,eAAeD,CAAY,UAAUE,CAAI;AAAA;AAAA,yDAExBC,CAAK;AAAA,yDACLC,CAAK;AAAA,4DACFC,CAAQ;AAAA,6DACPC,CAAS;AAAA;AAAA,kBAGjE,EACA,KAAK,EAAE,CACZ,CC1BA,MAAMC,EAAO,CACX,KAAM,SAAS,MAAM,CAAC,EACtB,QAAS,SAAS,cAAc,UAAU,EAC1C,IAAK,SAAS,cAAc,KAAK,CACnC,EAEAA,EAAK,KAAK,iBAAiB,SAAUC,GAAK,CACxCA,EAAE,eAAc,EAChBD,EAAK,QAAQ,UAAY,GACzBE,IAIA,MAAMC,EAAYF,EAAE,OAAO,MAAM,MAAM,OACvC,GAAI,CAACE,EAAW,CAEdH,EAAK,QAAQ,UAAY,GAEzBI,EAAS,QAAQ,CACf,MAAO,aACP,QAAS,iCACT,YAAa,KACb,SAAU,SACV,MAAO,GACP,YAAa,CACnB,CAAK,EACD,MACD,CAED,WAAW,IAAM,CACfrB,EAAUoB,CAAS,EAChB,KAAKE,GAAU,CAEd,GADA,QAAQ,IAAIA,CAAM,EACd,CAACA,EAAO,KAAK,QAAU,CAACA,EAAO,KACjC,MAAM,IAAI,MAAM,wBAAwB,EAE1ChB,EAAcgB,EAAQL,EAAK,OAAO,CAC1C,CAAO,EACA,MAAM,IAAM,CAEXA,EAAK,QAAQ,UAAY,GACzBI,EAAS,MAAM,CACb,MAAO,SACP,QACE,2EACF,YAAa,KACb,gBAAiB,UACjB,SAAU,SACV,MAAO,GACP,YAAa,CACvB,CAAS,CACT,CAAO,EACHH,EAAE,OAAO,OACV,EAAE,GAAI,CAGT,CAAC,EAED,SAASC,GAAY,CACnBF,EAAK,IAAI,UAAU,IAAI,QAAQ,EAC/BA,EAAK,QAAQ,OAAOA,EAAK,GAAG,CAC9B"}